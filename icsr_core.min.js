Type.registerNamespace("iCSR"),function(e,t,n){function o(e){return"string"==typeof e}function r(e,t){return"object"==typeof e?e.hasOwnProperty(t):o(e)&&t.length>0?e.indexOf(t)>-1:0}function i(e,t){return o(e)?e.split(t||","):"object"==typeof e?Object.keys(e):[]}function a(e,t,n){i(n||t).map(function(n){r(t,n)&&(e[n]=t[n])})}function l(e,t,n){return e?(t=t||this,i(e,"|").map(function(e){return n=t[e],e===s&&(n=!!n),Array.isArray(n)&&(n=n.join("")),r(n,"|")?l(n,t):n||e}).join("")):void 0}var s="$edit";n.Template=function(u,c,d){var m={$Styles:[{outerdiv:"<div class='|$CSSid|' style='background:|color|;color:|contrast|'> |value| |$colortag|</div>",CSS:[".|$CSSid|{}"]}],$groupheader:0,$grid:0,msYellow:"#FFB700",msRed:"#F02401",msBlue:"#219DFD",msGreen:"#77BC00",colortag:"TD"};m[s]=!0,a(m,d),m.output=m.$Styles[0].outerdiv,n[u]=function(d,p,f){if(r(d,"wpq")){var g,A={},S=A.Name=p.Name,v=f.ID;return a(A,m),a(A,this!==p&&this!==e?this:{}),A.value=r(f,S)?f[S]:f[p.RealFieldName],a(A,{valuenr:A.value.match(/\d+/)/1,days:GetDaysAfterToday(new Date(A.value)),$CSSid:u,id:u+v,ID:v,Item:f}),A.valuenr?A.label=i(A.value," ")[1]:A.label=A.value,SP.SOD.executeFunc("sp.js","SP.ClientContext",function(){SP.PageContextInfo.get_webPermMasks().has(SP.PermissionKind.editListItems)||(A[s]=0)}),d.inGridMode&&!A.$grid||r(f,S+".COUNT")&&A.$groupheader?A.value:window.view===d.view?A.value:(A.$replace=l.bind(A),A.colors||(A.colors="msRed|,|msYellow|,|msBlue|,|msGreen"),o(A.colors)&&(A.colors=i(l(A.colors,A))),A.style=A.$Styles[A.style||0],g=t.getElementById(A.id),g&&g.parentNode.removeChild(g),g=t.createElement("STYLE"),g.id=A.id,t.head.appendChild(g),A.style.CSS.map(function(e){try{e=l(e,A),g.sheet.insertRule(e,0)}catch(t){}}),c.call(A,d),o(A.color)||(A.color=A.colors[A.color]),A.color===A.msRed&&(A.contrast="beige"),A.$colortag="<img onload=iCSR.$up(this,'|colortag|').style.background='|color|' src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7>",A.output=A.$replace(A.output),A.output)}return n[u].bind(d)}},n.$up=function(e,t){for(;e.tagName!==t;)e=e.parentNode;return e},n.$update=function(e,t,o,i){n.$up(e,"TD").innerHTML="saving...",PreventDefaultNavigation();var a=new SP.ClientContext.get_current,l=a.get_web().get_lists().getById(SP.ListOperation.Selection.getSelectedList()).getItemById(t);l.set_item(o,i),l.update(),n.$X=1,a.executeQueryAsync(function(){n.$X=0,ctx.skipNextAnimation=1,AJAXRefreshView({currentCtx:ctx,csrAjaxRefresh:!0},1)},function(){n.$X=0;var e,i=arguments[1],a=i.get_errorCode()/-1,l={2130575162:"Validation",2130575339:"Version"};e=r(l,a)?l[a]:i.get_message(),SP.UI.Status.addStatus("Update",String.format(e+" conflict ({0}) {1}",t,o))})},n.Me=function(e){SP.SOD.executeFunc("clienttemplates.js","SPClientTemplates",function(){function t(t){"function"==typeof e[t]&&e[t].call(this,ctx)}function n(){a(o.Templates,e,"View,Body,Group,Item,Header,Footer,Fields"),SPClientTemplates.TemplateManager.RegisterTemplateOverrides(o)}var o={OnPreRender:function(){t("OnPreRender")},Templates:{},OnPostRender:function(){t("OnPostRender")}};RegisterModuleInit(SPClientRenderer.ReplaceUrlTokens(e.file),n),n()})}}(window,document,iCSR);